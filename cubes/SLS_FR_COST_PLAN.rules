#Region System
FEEDSTRINGS;
SKIPCHECK;
#EndRegion

#Calcul de zSLS_VOL à partir de SLS_VOL pour masque PAW
['N/A_SHIP_PLANT','N/A_PROD_PLANT','N/A_VENDOR','zSLS_VOL'] = N: DB('SLS_FR_COST_PLAN', !'1_G_CURRENT_PHASE',!SLS_Q_HQ , !'1_G_PERIOD', !'1_G_SALES_ORG',
				!'1_G_DISTRIB_CHANNEL', !SLS_MATERIAL_PLAN, !SLS_CUSTOMER, !SLS_MAT_FREIGHT_GROUP, !SLS_SHIP_POINT, 'TOTAL_SHIP_PLANT', 'TOTAL_PROD_PLANT',
                'TOTAL_VENDOR', 'SLS_VOL' );

## Besoin de la valo lors du Switch Article cas 2


#Calcul de FR_COST_UNIT à partir du Manual et de l'imported
#Modification par Elisabeth Mounier le 27/11/2019 : Ticket 7054

# ['FR_COST_UNIT'] = N : If(DB('SLS_FR_COST_PLAN', !'1_G_CURRENT_PHASE', !'1_G_PERIOD', !'1_G_SALES_ORG', !'1_G_DISTRIB_CHANNEL', !SLS_MATERIAL_PLAN,
# 							!SLS_CUSTOMER, !SLS_MAT_FREIGHT_GROUP, !SLS_SHIP_POINT, !SLS_SHIP_PLANT, !SLS_PROD_PLANT, !SLS_VENDOR, 'MAN_FR_COST') <>0,
#                             	DB('SLS_FR_COST_PLAN', !'1_G_CURRENT_PHASE', !'1_G_PERIOD', !'1_G_SALES_ORG', !'1_G_DISTRIB_CHANNEL', !SLS_MATERIAL_PLAN,
# 								!SLS_CUSTOMER, !SLS_MAT_FREIGHT_GROUP, !SLS_SHIP_POINT, !SLS_SHIP_PLANT, !SLS_PROD_PLANT, !SLS_VENDOR, 'MAN_FR_COST'),
#                                 DB('SLS_FR_COST_PLAN', !'1_G_CURRENT_PHASE', !'1_G_PERIOD', !'1_G_SALES_ORG', !'1_G_DISTRIB_CHANNEL', !SLS_MATERIAL_PLAN,
# 								!SLS_CUSTOMER, !SLS_MAT_FREIGHT_GROUP, !SLS_SHIP_POINT, !SLS_SHIP_PLANT, !SLS_PROD_PLANT, !SLS_VENDOR, 'IMP_FR_COST')
#                          );
['FR_COST_UNIT'] = N : DB('SLS_FR_COST_PLAN', !'1_G_CURRENT_PHASE', !SLS_Q_HQ, !'1_G_PERIOD', !'1_G_SALES_ORG', !'1_G_DISTRIB_CHANNEL', !SLS_MATERIAL_PLAN,
 								!SLS_CUSTOMER, !SLS_MAT_FREIGHT_GROUP, !SLS_SHIP_POINT, !SLS_SHIP_PLANT, !SLS_PROD_PLANT, !SLS_VENDOR, 'MAN_FR_COST');

#Calcul de la valo pour FR_COST
[] = N:  IF( DB('}ElementAttributes_SLS_FR_COST_PLAN_IND',!SLS_FR_COST_PLAN_IND,'Prix_Associé') @<> '',
				DB('SLS_FR_COST_PLAN', !'1_G_CURRENT_PHASE', !SLS_Q_HQ, !'1_G_PERIOD', !'1_G_SALES_ORG', !'1_G_DISTRIB_CHANNEL', !SLS_MATERIAL_PLAN,
	    			!SLS_CUSTOMER, !SLS_MAT_FREIGHT_GROUP, !SLS_SHIP_POINT, !SLS_SHIP_PLANT, !SLS_PROD_PLANT, !SLS_VENDOR,
        			DB('}ElementAttributes_SLS_FR_COST_PLAN_IND',!SLS_FR_COST_PLAN_IND,'Prix_Associé'))
                *DB('SLS_FR_COST_PLAN',!1_G_CURRENT_PHASE, !SLS_Q_HQ, !1_G_PERIOD, !1_G_SALES_ORG,
					!1_G_DISTRIB_CHANNEL, !SLS_MATERIAL_PLAN, !SLS_CUSTOMER, !SLS_MAT_FREIGHT_GROUP, !SLS_SHIP_POINT,
    				'TOTAL_SHIP_PLANT', 'TOTAL_PROD_PLANT', 'TOTAL_VENDOR', 'SLS_VOL'),
               CONTINUE);

#Calcul Prix Conso FR_COST
[] = C:  IF( DB('}ElementAttributes_SLS_FR_COST_PLAN_IND',!SLS_FR_COST_PLAN_IND,'Valo_Associée') @<> '',
				DB('SLS_FR_COST_PLAN', !'1_G_CURRENT_PHASE', !SLS_Q_HQ, !'1_G_PERIOD', !'1_G_SALES_ORG', !'1_G_DISTRIB_CHANNEL', !SLS_MATERIAL_PLAN,
	    			!SLS_CUSTOMER, !SLS_MAT_FREIGHT_GROUP, !SLS_SHIP_POINT, !SLS_SHIP_PLANT, !SLS_PROD_PLANT, !SLS_VENDOR,
        			DB('}ElementAttributes_SLS_FR_COST_PLAN_IND',!SLS_FR_COST_PLAN_IND,'Valo_Associée'))
                \DB('SLS_FR_COST_PLAN',!1_G_CURRENT_PHASE, !SLS_Q_HQ, !1_G_PERIOD, !1_G_SALES_ORG,
					!1_G_DISTRIB_CHANNEL, !SLS_MATERIAL_PLAN, !SLS_CUSTOMER, !SLS_MAT_FREIGHT_GROUP, !SLS_SHIP_POINT,
    				'TOTAL_SHIP_PLANT', 'TOTAL_PROD_PLANT', 'TOTAL_VENDOR', 'SLS_VOL'),
               CONTINUE);

Feeders;

#Feeders Calcul de zSLS_VOL
['TOTAL_SHIP_PLANT','TOTAL_PROD_PLANT','TOTAL_VENDOR','SLS_VOL'] =>
	DB('SLS_FR_COST_PLAN', !'1_G_CURRENT_PHASE', !SLS_Q_HQ, !'1_G_PERIOD', !'1_G_SALES_ORG', !'1_G_DISTRIB_CHANNEL', !SLS_MATERIAL_PLAN, !SLS_CUSTOMER,
    !SLS_MAT_FREIGHT_GROUP, !SLS_SHIP_POINT, 'N/A_SHIP_PLANT', 'N/A_PROD_PLANT', 'N/A_VENDOR', 'zSLS_VOL' );

#Feeders de la condition
['MAN_FR_COST'] => ['FR_COST_UNIT'];
#Modification par Elisabeth Mounier le 27/11/2019 : Ticket 7054
#['IMP_FR_COST'] => ['FR_COST_UNIT'];


#Feeders valo
# ['SLS_VOL'] => ['FR_COST'];
# ['SLS_VOL'] => ['IMP_FR_COST_VALO'];
# ['SLS_VOL'] => ['MAN_FR_COST_VALO'];
['FR_COST_UNIT'] => ['FR_COST'];
['IMP_FR_COST'] => ['IMP_FR_COST_VALO'];
['MAN_FR_COST'] => ['MAN_FR_COST_VALO'];

#Feeders prix
['FR_COST'] => ['FR_COST_UNIT'];
['IMP_FR_COST_VALO'] => ['IMP_FR_COST'];
['MAN_FR_COST_VALO'] => ['MAN_FR_COST'];